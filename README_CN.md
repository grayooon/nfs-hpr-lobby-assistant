Markdown

# NFS Hot Pursuit Remastered 自动匹配助手 (Lobby Assistant)

这是一个基于 Python 和计算机视觉技术的辅助工具，专为《极品飞车：热力追踪 重制版》(Need for Speed: Hot Pursuit Remastered) 设计。脚本代码中加入了大量详细注释，非常适合想入门 Python 和计算机视觉的脚本小子 (Script Kiddies) 或初学者学习参考。

**⚠️ 声明：本脚本仅用于辅助“自动排队匹配”和“菜单选车”，不包含任何自动驾驶、自动瞄准或修改游戏内存等作弊功能。旨在帮助玩家节省重复的菜单操作时间。如有侵权，即刻删除。**

## ✨ 主要功能

* **视觉识别**：使用 OpenCV 灰度匹配技术，无视游戏内昼夜光影变化，精准识别 UI 状态。
* **OBS 兼容**：通过 OBS 虚拟摄像机采集画面，完美支持游戏的“独占全屏”模式（解决了全屏游戏截图黑屏的问题）。
* **断线重连**：自动检测网络断开或匹配失败，并自动重新寻找房间。
* **自定义选车**：可配置化的选车逻辑，支持为每个类型的车辆设置自定义按键次数。
* **智能防干扰**：
    * **人工接管**：在自动选车时，如果你按下 `左` 或 `右` 方向键，脚本会立刻停止操作，将控制权交还给你。
    * **防误触休眠**：选车确认后，脚本会自动进入 40秒 的深度休眠（关闭视觉检测），防止游戏转场期间的误操作。
* **资源节约**：提供“运行模式”、“睡眠模式”和“深度休眠模式”，占用 CPU/GPU 资源极低。

## 🛠️ 环境要求

1.  **Python 3.10+**
2.  **OBS Studio** (用于开启虚拟摄像机)
3.  游戏分辨率可设置为 **1920x1080** 或 **2560x1440** (其他分辨率未经测试)

## 📂 目录结构浏览

在发布前，请确保您的文件夹结构如下所示：

```text
nfs-autopilot/
│
├── assets/                 <-- [必须] 存放所有游戏 UI 截图 (.png)
│   ├── main_page.png
│   ├── online_main_page.png
│   ├── policecar_a.png
│   └── ... (共约16张图片)
│
├── nfs_bot.py              <-- 核心脚本代码
├── requirements.txt        <-- 依赖库列表
└── README.md               <-- 说明文档
🚀 安装步骤
下载本项目： 点击右上角的 Code -> Download ZIP，解压到本地。

安装依赖库： 在解压后的目录中打开终端（CMD 或 PowerShell），运行：

Bash

pip install -r requirements.txt
准备素材：

脚本运行依赖 assets 文件夹中的游戏截图。

注意：请确保 assets 文件夹内包含对应的游戏 UI 截图，文件名需与代码中定义的一致。

📝 自定义选车配置
您可以打开 nfs_bot.py，在顶部的 CAR_SELECTION_CONFIG 区域修改选车逻辑。

数字含义：代表在该类别下，脚本自动按“右方向键”的次数。

0：代表不按右键，直接按空格选中第一辆车。

Python

# 车辆选择自定义配置
CAR_SELECTION_CONFIG = {
    "POLICE": {
        "a": 7,  # 警察A类车：按右键7次
        "b": 6,  # 警察B类车：按右键6次
        "c": 10,
        "d": 1,
        "e": 0
    },
    "RACER": {
        "a": 7,
        "b": 5,
        "c": 16,
        "d": 12,
        "e": 1
    }
}
🕹️ 脚本使用与逻辑
准备工作：

启动 OBS，添加游戏源并开启“虚拟摄像机”。

确保网络连接正常。

运行脚本：python nfs_bot.py。

启动流程：

将游戏进入到 主页面 (Main Page)。

按下键盘数字键 7 启动脚本。

运行逻辑：

自动加入：脚本识别到主页面后，会自动操作进入“多人模式”。

自动重试：若因网络波动导致加入失败并退回多人游戏主页面，脚本将识别状态并自动重试。

自动选车：进入房间后，脚本将按照代码中预先设定的默认车辆（见上方配置）进行选择。

随机车漆：车辆选定后，脚本会自动随机选择一个车漆颜色并确认。

高级修改：

脚本代码采用模块化设计。若需要实现“选择玩家指定车漆”而非随机车漆，请自行修改代码中的 sequence_color_confirm_random 函数逻辑。

⌨️ 快捷键控制
7: 运行模式

9: 睡眠模式

0: 深度休眠

V: 显示/隐藏调试窗口

📄 开源协议
MIT License.
